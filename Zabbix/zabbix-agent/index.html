<!--
  This Basic theme serves as an example for how to create other
  themes by demonstrating the features with minimal HTML and CSS.
  Comments like this will be through the code to explain briefly
  what each feature is and point you to the MkDocs documentation
  to find out more.
-->
<!DOCTYPE html>
<head>
  
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <!--
    The page_title contains the title for a page as shown in the navigation.
    Site name contains the name as defined in the mkdocs.yml
  -->
  
  <title>install [zabbix-agent] - not name</title>
  
  <!--
    You can include external assets of course, but be aware that it means the
    documentation may not work well offline.
  -->
  <link rel="stylesheet" href="../../css/pure-min.css">
  <link rel="stylesheet" href="../../css/theme.css">

  <!--
    extra_ess contains paths to CSS files in the users
    documentation directory or a list of CSS files defined in
    their mkdocs.yml.

    http://www.mkdocs.org/user-guide/configuration/#extra_css
  -->
   
  
  
  
  
  
  
</head>

<body>

  <!--
  <h1>This is an example theme for MkDocs.</h1>

  <p>
    It is designed to be read by looking at the theme HTML which is heavily
    commented. The easiest way to do that is by
    <strong><a href="https://github.com/mkdocs/mkdocs-basic-theme/tree/master/basic_theme">
    looking at the source on GitHub.</a></strong>. Otherwise this is just a
    demonstration that the theme is fully functional.
  </p>

  <hr/>
  -->
  <!--
  <h2>Documentation Navigation</h2>
  -->
  <!--
    Create the navigation for the documentation.

    Because we don't know how many levels deep the navigation is, it needs to
    be included in it's own file so it can be recursive. Otherwise the theme
    can also only support a specific number of levels.

    See the nav.html file for more details about how this works.
  -->
  

<div id="layout">

    <!-- Menu toggle -->
  <h1 class="logo-text">
	<label for="toggler">
      <i class="fas fa-bars sidebar-toggle"></i>
    </label>
  </h1>
	
	<input type="checkbox" id="toggler"/>
    <div id="menu">
      <div class="pure-menu">
	  <a class="pure-menu-heading" href="../..">Home</a>
  <ul class="pure-menu-list">
  
    <!--

-->

  <li class="pure-menu-folder">
    Тренировки
    <ul>
        
            <!--

-->

<li >
    <a href="../../%D0%A2%D1%80%D0%B5%D0%BD%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B8/%D0%A1%D0%B8%D0%BB%D0%BE%D0%B2%D1%8B%D0%B5%20%D1%82%D1%80%D0%B5%D0%BD%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B8/" class="pure-menu-link">Силовые тренировки</a>
</li>

        
            <!--

-->

<li >
    <a href="../../%D0%A2%D1%80%D0%B5%D0%BD%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B8/%D0%B2%D0%BE%D1%81%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5/" class="pure-menu-link">Восстановление</a>
</li>

        
            <!--

-->

<li >
    <a href="../../%D0%A2%D1%80%D0%B5%D0%BD%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B8/%D0%B7%D0%B0%D1%80%D1%8F%D0%B4%D0%BA%D0%B0/" class="pure-menu-link">Зарядка</a>
</li>

        
            <!--

-->

<li >
    <a href="../../%D0%A2%D1%80%D0%B5%D0%BD%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B8/%D1%80%D0%B0%D1%81%D1%82%D1%8F%D0%B6%D0%BA%D0%B0/" class="pure-menu-link">Растяжка</a>
</li>

        
    </ul>
  </li>

  
    <!--

-->

  <li class="pure-menu-folder">
    Поход
    <ul>
        
            <!--

-->

<li >
    <a href="../../%D0%9F%D0%BE%D1%85%D0%BE%D0%B4/%D0%93%D0%B8%D0%B3%D0%B8%D0%B5%D0%BD%D0%B0/" class="pure-menu-link">Гигиена</a>
</li>

        
            <!--

-->

<li >
    <a href="../../%D0%9F%D0%BE%D1%85%D0%BE%D0%B4/%D0%94%D0%BE%D0%BB%D0%B6%D0%BD%D0%BE%D1%81%D1%82%D0%B8/" class="pure-menu-link">Должности</a>
</li>

        
            <!--

-->

<li >
    <a href="../../%D0%9F%D0%BE%D1%85%D0%BE%D0%B4/%D0%9F%D0%B8%D1%82%D0%B0%D0%BD%D0%B8%D0%B5/" class="pure-menu-link">Питание</a>
</li>

        
    </ul>
  </li>

  
    <!--

-->

  <li class="pure-menu-folder">
    Питание
    <ul>
        
            <!--

-->

<li >
    <a href="../../%D0%9F%D0%B8%D1%82%D0%B0%D0%BD%D0%B8%D0%B5/%D0%91%D0%96%D0%A3/" class="pure-menu-link">БЖУ</a>
</li>

        
    </ul>
  </li>

  
    <!--

-->

  <li class="pure-menu-folder">
    Кинокаталог
    <ul>
        
            <!--

-->

<li >
    <a href="../../%D0%9A%D0%B8%D0%BD%D0%BE%D0%BA%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3/%D0%9C%D1%83%D0%BB%D1%8C%D1%82%D1%84%D0%B8%D0%BB%D1%8C%D0%BC%D1%8B/" class="pure-menu-link">Мультфильмы</a>
</li>

        
            <!--

-->

<li >
    <a href="../../%D0%9A%D0%B8%D0%BD%D0%BE%D0%BA%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3/%D0%A4%D0%B8%D0%BB%D1%8C%D0%BC%D1%8B/" class="pure-menu-link">Фильмы</a>
</li>

        
    </ul>
  </li>

  
    <!--

-->

  <li class="pure-menu-folder">
    Useful programs
    <ul>
        
            <!--

-->

<li >
    <a href="../../useful_programs/" class="pure-menu-link">useful opensource programms</a>
</li>

        
    </ul>
  </li>

  
    <!--

-->

  <li class="pure-menu-folder">
    Zabbix
    <ul>
        
            <!--

-->

<li >
    <a href="../Partitioning/" class="pure-menu-link">Partitioning with external script for mysql/mariadb database</a>
</li>

        
            <!--

-->

<li >
    <a href="../SSO/" class="pure-menu-link">SSO in zabbix</a>
</li>

        
            <!--

-->

<li >
    <a href="../linux_template/" class="pure-menu-link">linux template</a>
</li>

        
            <!--

-->

<li >
    <a href="../mariadb/" class="pure-menu-link">Install mariadb node of galera + haproxy + keepalived</a>
</li>

        
            <!--

-->

<li >
    <a href="../mysql_monitoring/" class="pure-menu-link">Monitoring mysql/mariadb</a>
</li>

        
            <!--

-->

<li class="pure-menu-item">
    <a href="./" class="pure-menu-link">install [zabbix-agent]</a>
</li>

        
            <!--

-->

<li >
    <a href="../zabbix-proxy/" class="pure-menu-link">Zabbix-proxy</a>
</li>

        
    </ul>
  </li>

  
    <!--

-->

  <li class="pure-menu-folder">
    Browser
    <ul>
        
            <!--

-->

<li >
    <a href="../../Browser/ublock/" class="pure-menu-link">uBlock Origin</a>
</li>

        
            <!--

-->

<li >
    <a href="../../Browser/%D0%98%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D1%84%D0%B5%D0%B9%D1%81%D0%B0/" class="pure-menu-link">Изменение интерфейса</a>
</li>

        
    </ul>
  </li>

  
    <!--

-->

<li >
    <a href="../.." class="pure-menu-link">Home</a>
</li>

  
  </ul>
      </div>
    </div>




<div id="main">
  <div class="content">
    
        <h1 id="install-zabbix-agent">install <a href="https://www.zabbix.com/documentation/current/manual/concepts/agent">zabbix-agent</a></h1>
<p>Go in <a href="https://repo.zabbix.com/zabbix/">repo</a> for actual version of rpm (example Centos 7) :</p>
<pre><code class="language-sh">rpm -ivh https://repo.zabbix.com/zabbix/5.0/rhel/7/x86_64/zabbix-release-5.0-1.el7.noarch.rpm 
yum -y install zabbix-agent
chkconfig zabbix-agent on
</code></pre>
<p>You can use jinja template for config of zabbix-agent <code>/etc/zabbix/zabbix_agentd.conf</code>.
Default settings on agent (other options generally useless):</p>
<pre><code class="language-conf">PidFile=/var/run/zabbix/zabbix_agentd.pid
LogFile=/var/log/zabbix/zabbix_agentd.log
LogFileSize=0
Server={{ Proxy[hostname] }}
ServerActive={{ Proxy[hostname] }}
Hostname={{ Host[hostname] }} # !!!Must be like name of host in web
Include=/etc/zabbix/zabbix_agentd.d/*.conf
</code></pre>
<p>Give access and starting:</p>
<pre><code class="language-sh">iptables -I INPUT -p tcp --dport 10050 -j ACCEPT
iptables-save &gt; /dev/null 2&gt;&amp;1
service zabbix-agent start
</code></pre>
<p>If we use selinux, need allow zabbix-agent, or check that selinux disabled.
For firewalld:</p>
<pre><code class="language-sh">firewall-cmd --permanent --add-port=10050/tcp
firewall-cmd --reload
</code></pre>
<p>You may need to create directories manually:</p>
<pre><code class="language-sh">mkdir /var/run/zabbix &amp;&amp; chown -R zabbix:zabbix /var/run/zabbix
mkdir /var/log/zabbix &amp;&amp; chown -R zabbix:zabbix /var/log/zabbix
</code></pre>
<h2 id="playbook">playbook</h2>
<p>Example of ansible role for centos 7:</p>
<pre><code class="language-yml">- name: Install, configure, and start zabbix-agent
  block:
    - name: add rpm
      yum: name=https://repo.zabbix.com/zabbix/5.0/rhel/7/x86_64/zabbix-release-5.0-1.el7.noarch.rpm

    - name: install zabbix-agent
      yum:
        name: zabbix-agent
        state: present

    - name: copy userparams
      copy:
       src: 'templates/userparams.conf'
       dest: '/etc/zabbix/zabbix_agentd.d/userparams.conf'
       owner: zabbix
       group: zabbix

    - name: make config
      template:
       src: 'templates/zabbix_agentd.j2'
       dest: '/etc/zabbix/zabbix_agentd.conf'

    - name: add line in iptables
      command: iptables -I INPUT 5 -p tcp --dport 10050 -j ACCEPT

    - name: iptables save
      shell: iptables-save &gt; /etc/sysconfig/iptables

    - name: enable zabbix-agent
      command: chkconfig zabbix-agent on

    - name: start zabbix-agent
      service:
        name: zabbix-agent
        state: started
  when: 
    - ansible_facts['distribution'] == 'CentOS'
    - ansible_facts['distribution_major_version'] == &quot;7&quot;
  become: true
  ignore_errors: yes
</code></pre>
<h2 id="win">win</h2>
<p>If you <a href="https://www.zabbix.com/download_agents">downloaded</a> archive , unzip the files and put them where they should be (i put the files in c:\zabbix for example).
Change settings Server/ServerActive/Hostname in zabbix_agentd.conf. Run cmd from admin: </p>
<pre><code class="language-cmd">zabbix_agentd.exe -c c:\zabbix\conf\zabbix_agentd.conf --install
zabbix_agentd.exe --start
</code></pre>
<p>Do not forget to add an exception to the firewall =)</p>
    
    



  <!--  
  <h2>Next and previous links</h2>

    Implement the previous and next links to cycle through the pages.
  -->

    
    
    <nav class="pagination">
      
        <a href="../mysql_monitoring/" class="pagination--pager" title="Monitoring mysql/mariadb">&laquo; Previous</a>
      
      
      
        <a href="../zabbix-proxy/"  class="pagination--pager" title="Zabbix-proxy"/>Next &raquo;</a>
      
    </nav>
    
    



  <!--
    Support repo URL
  -->
  
  
   Built on <a href="https://github.com/notoriginalnik/notoriginalnik.github.io">GitHub</a>
  
  
  
   with <a href="https://www.mkdocs.org">MkDocs</a> and <a href="https://github.com/notoriginalnik/mkdocs-pure">Pure theme</a>
  
  </div>
</div>

</div>
</body>
</html>